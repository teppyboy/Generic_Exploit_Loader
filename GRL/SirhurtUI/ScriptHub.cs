using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Linq.Expressions;
using System.Net;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Security.Cryptography;
using System.Text;
using System.Windows.Forms;
using Bunifu.Framework.UI;
using Microsoft.CSharp.RuntimeBinder;
using Newtonsoft.Json.Linq;

namespace SirhurtUI
{
	// Token: 0x02000039 RID: 57
	public partial class ScriptHub : Form
	{
		// Token: 0x06000046 RID: 70
		[DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
		[return: MarshalAs(UnmanagedType.Bool)]
		public static extern bool WaitNamedPipe(string name, int timeout);

		// Token: 0x06000047 RID: 71 RVA: 0x0000BCF8 File Offset: 0x0000BCF8
		public static string RandomString(int maxSize)
		{
			if (ScriptHub.<>o__2.<>p__0 == null)
			{
				ScriptHub.<>o__2.<>p__0 = CallSite<Func<CallSite, object, char[]>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(char[]), typeof(ScriptHub)));
			}
			char[] array = ScriptHub.<>o__2.<>p__0.Target(ScriptHub.<>o__2.<>p__0, new char[62]);
			if (ScriptHub.<>o__2.<>p__1 == null)
			{
				ScriptHub.<>o__2.<>p__1 = CallSite<Func<CallSite, object, char[]>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(char[]), typeof(ScriptHub)));
			}
			array = ScriptHub.<>o__2.<>p__1.Target(ScriptHub.<>o__2.<>p__1, "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".ToCharArray());
			if (ScriptHub.<>o__2.<>p__2 == null)
			{
				ScriptHub.<>o__2.<>p__2 = CallSite<Func<CallSite, object, byte[]>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(byte[]), typeof(ScriptHub)));
			}
			byte[] array2 = ScriptHub.<>o__2.<>p__2.Target(ScriptHub.<>o__2.<>p__2, new byte[1]);
			if (ScriptHub.<>o__2.<>p__4 == null)
			{
				ScriptHub.<>o__2.<>p__4 = CallSite<Func<CallSite, object, RNGCryptoServiceProvider>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(RNGCryptoServiceProvider), typeof(ScriptHub)));
			}
			using (RNGCryptoServiceProvider rngcryptoServiceProvider = ScriptHub.<>o__2.<>p__4.Target(ScriptHub.<>o__2.<>p__4, new RNGCryptoServiceProvider()))
			{
				rngcryptoServiceProvider.GetNonZeroBytes(array2);
				if (ScriptHub.<>o__2.<>p__3 == null)
				{
					ScriptHub.<>o__2.<>p__3 = CallSite<Func<CallSite, object, byte[]>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(byte[]), typeof(ScriptHub)));
				}
				array2 = ScriptHub.<>o__2.<>p__3.Target(ScriptHub.<>o__2.<>p__3, new byte[maxSize]);
				rngcryptoServiceProvider.GetNonZeroBytes(array2);
			}
			if (ScriptHub.<>o__2.<>p__5 == null)
			{
				ScriptHub.<>o__2.<>p__5 = CallSite<Func<CallSite, object, StringBuilder>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(StringBuilder), typeof(ScriptHub)));
			}
			StringBuilder stringBuilder = ScriptHub.<>o__2.<>p__5.Target(ScriptHub.<>o__2.<>p__5, new StringBuilder(maxSize));
			foreach (byte b in array2)
			{
				stringBuilder.Append(array[(int)b % array.Length]);
			}
			return stringBuilder.ToString();
		}

		// Token: 0x06000048 RID: 72 RVA: 0x0000BF0C File Offset: 0x0000BF0C
		private JObject JsonDecode(string Json)
		{
			if (ScriptHub.<>o__3.<>p__1 == null)
			{
				ScriptHub.<>o__3.<>p__1 = CallSite<Func<CallSite, object, JObject>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(JObject), typeof(ScriptHub)));
			}
			Func<CallSite, object, JObject> target = ScriptHub.<>o__3.<>p__1.Target;
			CallSite <>p__ = ScriptHub.<>o__3.<>p__1;
			if (ScriptHub.<>o__3.<>p__0 == null)
			{
				ScriptHub.<>o__3.<>p__0 = CallSite<Func<CallSite, Type, object, object>>.Create(Binder.InvokeMember(CSharpBinderFlags.None, "Parse", null, typeof(ScriptHub), new CSharpArgumentInfo[]
				{
					CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.UseCompileTimeType | CSharpArgumentInfoFlags.IsStaticType, null),
					CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
				}));
			}
			return target(<>p__, ScriptHub.<>o__3.<>p__0.Target(ScriptHub.<>o__3.<>p__0, typeof(JObject), Json));
		}

		// Token: 0x06000049 RID: 73 RVA: 0x0000BFBC File Offset: 0x0000BFBC
		public string httpGet(string link)
		{
			if (ScriptHub.<>o__4.<>p__0 == null)
			{
				ScriptHub.<>o__4.<>p__0 = CallSite<Func<CallSite, object, HttpWebRequest>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(HttpWebRequest), typeof(ScriptHub)));
			}
			HttpWebRequest httpWebRequest = ScriptHub.<>o__4.<>p__0.Target(ScriptHub.<>o__4.<>p__0, (HttpWebRequest)WebRequest.Create(link));
			HttpWebRequest httpWebRequest2 = httpWebRequest;
			if (ScriptHub.<>o__4.<>p__1 == null)
			{
				ScriptHub.<>o__4.<>p__1 = CallSite<Func<CallSite, object, DecompressionMethods>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(DecompressionMethods), typeof(ScriptHub)));
			}
			httpWebRequest2.AutomaticDecompression = ScriptHub.<>o__4.<>p__1.Target(ScriptHub.<>o__4.<>p__1, DecompressionMethods.GZip | DecompressionMethods.Deflate);
			if (ScriptHub.<>o__4.<>p__5 == null)
			{
				ScriptHub.<>o__4.<>p__5 = CallSite<Func<CallSite, object, HttpWebResponse>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(HttpWebResponse), typeof(ScriptHub)));
			}
			string result;
			using (HttpWebResponse httpWebResponse = ScriptHub.<>o__4.<>p__5.Target(ScriptHub.<>o__4.<>p__5, (HttpWebResponse)httpWebRequest.GetResponse()))
			{
				if (ScriptHub.<>o__4.<>p__4 == null)
				{
					ScriptHub.<>o__4.<>p__4 = CallSite<Func<CallSite, object, Stream>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(Stream), typeof(ScriptHub)));
				}
				using (Stream stream = ScriptHub.<>o__4.<>p__4.Target(ScriptHub.<>o__4.<>p__4, httpWebResponse.GetResponseStream()))
				{
					if (ScriptHub.<>o__4.<>p__3 == null)
					{
						ScriptHub.<>o__4.<>p__3 = CallSite<Func<CallSite, object, StreamReader>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(StreamReader), typeof(ScriptHub)));
					}
					using (StreamReader streamReader = ScriptHub.<>o__4.<>p__3.Target(ScriptHub.<>o__4.<>p__3, new StreamReader(stream)))
					{
						if (ScriptHub.<>o__4.<>p__2 == null)
						{
							ScriptHub.<>o__4.<>p__2 = CallSite<Func<CallSite, object, string>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(string), typeof(ScriptHub)));
						}
						result = ScriptHub.<>o__4.<>p__2.Target(ScriptHub.<>o__4.<>p__2, streamReader.ReadToEnd());
					}
				}
			}
			return result;
		}

		// Token: 0x0600004A RID: 74 RVA: 0x0000C1CC File Offset: 0x0000C1CC
		public static void SirHurtPipe(string script)
		{
			try
			{
				if (ScriptHub.<>o__5.<>p__0 == null)
				{
					ScriptHub.<>o__5.<>p__0 = CallSite<Action<CallSite, Type, object, object>>.Create(Binder.InvokeMember(CSharpBinderFlags.ResultDiscarded, "WriteAllText", null, typeof(ScriptHub), new CSharpArgumentInfo[]
					{
						CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.UseCompileTimeType | CSharpArgumentInfoFlags.IsStaticType, null),
						CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null),
						CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
					}));
				}
				ScriptHub.<>o__5.<>p__0.Target(ScriptHub.<>o__5.<>p__0, typeof(File), "sirhurt.dat", script);
			}
			catch (Exception)
			{
			}
		}

		// Token: 0x0600004B RID: 75 RVA: 0x0000C264 File Offset: 0x0000C264
		public ScriptHub()
		{
			this.InitializeComponent();
		}

		// Token: 0x0600004C RID: 76 RVA: 0x0000955B File Offset: 0x0000955B
		private void Button1_Click(object sender, EventArgs e)
		{
			base.Hide();
		}

		// Token: 0x0600004D RID: 77 RVA: 0x0000C274 File Offset: 0x0000C274
		private void Button2_Click(object sender, EventArgs e)
		{
			if (ScriptHub.<>o__8.<>p__0 == null)
			{
				ScriptHub.<>o__8.<>p__0 = CallSite<Func<CallSite, object, FormWindowState>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(FormWindowState), typeof(ScriptHub)));
			}
			base.WindowState = ScriptHub.<>o__8.<>p__0.Target(ScriptHub.<>o__8.<>p__0, FormWindowState.Minimized);
		}

		// Token: 0x0600004E RID: 78 RVA: 0x0000C2CC File Offset: 0x0000C2CC
		private void ScriptHub_Load(object sender, EventArgs e)
		{
			if (ScriptHub.<>o__9.<>p__0 == null)
			{
				ScriptHub.<>o__9.<>p__0 = CallSite<Func<CallSite, object, string>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(string), typeof(ScriptHub)));
			}
			this.Text = ScriptHub.<>o__9.<>p__0.Target(ScriptHub.<>o__9.<>p__0, ScriptHub.RandomString(6));
			if (ScriptHub.<>o__9.<>p__1 == null)
			{
				ScriptHub.<>o__9.<>p__1 = CallSite<Func<CallSite, object, string>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(string), typeof(ScriptHub)));
			}
			base.Name = ScriptHub.<>o__9.<>p__1.Target(ScriptHub.<>o__9.<>p__1, ScriptHub.RandomString(6));
			if (ScriptHub.<>o__9.<>p__5 == null)
			{
				ScriptHub.<>o__9.<>p__5 = CallSite<Func<CallSite, object, string>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(string), typeof(ScriptHub)));
			}
			Func<CallSite, object, string> target = ScriptHub.<>o__9.<>p__5.Target;
			CallSite <>p__ = ScriptHub.<>o__9.<>p__5;
			if (ScriptHub.<>o__9.<>p__4 == null)
			{
				ScriptHub.<>o__9.<>p__4 = CallSite<Func<CallSite, ScriptHub, object, object>>.Create(Binder.InvokeMember(CSharpBinderFlags.InvokeSimpleName, "httpGet", null, typeof(ScriptHub), new CSharpArgumentInfo[]
				{
					CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.UseCompileTimeType, null),
					CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
				}));
			}
			Func<CallSite, ScriptHub, object, object> target2 = ScriptHub.<>o__9.<>p__4.Target;
			CallSite <>p__2 = ScriptHub.<>o__9.<>p__4;
			if (ScriptHub.<>o__9.<>p__3 == null)
			{
				ScriptHub.<>o__9.<>p__3 = CallSite<Func<CallSite, object, object, object>>.Create(Binder.BinaryOperation(CSharpBinderFlags.None, ExpressionType.Add, typeof(ScriptHub), new CSharpArgumentInfo[]
				{
					CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null),
					CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
				}));
			}
			Func<CallSite, object, object, object> target3 = ScriptHub.<>o__9.<>p__3.Target;
			CallSite <>p__3 = ScriptHub.<>o__9.<>p__3;
			if (ScriptHub.<>o__9.<>p__2 == null)
			{
				ScriptHub.<>o__9.<>p__2 = CallSite<Func<CallSite, object, object, object>>.Create(Binder.BinaryOperation(CSharpBinderFlags.None, ExpressionType.Add, typeof(ScriptHub), new CSharpArgumentInfo[]
				{
					CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null),
					CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
				}));
			}
			string json = target(<>p__, target2(<>p__2, this, target3(<>p__3, ScriptHub.<>o__9.<>p__2.Target(ScriptHub.<>o__9.<>p__2, "https://asshurthosting.pw/", "upl/UIScriptHub/"), "fetch.php")));
			List<JToken> list = Extensions.Children<JToken>(this.JsonDecode(json)["scripts"].Children()).ToList<JToken>();
			if (ScriptHub.<>o__9.<>p__6 == null)
			{
				ScriptHub.<>o__9.<>p__6 = CallSite<Func<CallSite, object, List<JToken>>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(List<JToken>), typeof(ScriptHub)));
			}
			this.LoadedScripts = ScriptHub.<>o__9.<>p__6.Target(ScriptHub.<>o__9.<>p__6, list);
			foreach (JToken jtoken in list)
			{
				this.listBox1.Items.Add(jtoken["Name"].ToString());
			}
			this.listBox1.SetSelected(0, true);
		}

		// Token: 0x0600004F RID: 79 RVA: 0x0000C588 File Offset: 0x0000C588
		private void BunifuFlatButton1_Click(object sender, EventArgs e)
		{
			if (ScriptHub.<>o__10.<>p__0 == null)
			{
				ScriptHub.<>o__10.<>p__0 = CallSite<Func<CallSite, object, string>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(string), typeof(ScriptHub)));
			}
			string arg = ScriptHub.<>o__10.<>p__0.Target(ScriptHub.<>o__10.<>p__0, this.listBox1.SelectedItem.ToString());
			foreach (JToken jtoken in this.LoadedScripts)
			{
				if (ScriptHub.<>o__10.<>p__2 == null)
				{
					ScriptHub.<>o__10.<>p__2 = CallSite<Func<CallSite, object, bool>>.Create(Binder.UnaryOperation(CSharpBinderFlags.None, ExpressionType.IsTrue, typeof(ScriptHub), new CSharpArgumentInfo[]
					{
						CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
					}));
				}
				Func<CallSite, object, bool> target = ScriptHub.<>o__10.<>p__2.Target;
				CallSite <>p__ = ScriptHub.<>o__10.<>p__2;
				if (ScriptHub.<>o__10.<>p__1 == null)
				{
					ScriptHub.<>o__10.<>p__1 = CallSite<Func<CallSite, string, object, object>>.Create(Binder.BinaryOperation(CSharpBinderFlags.None, ExpressionType.Equal, typeof(ScriptHub), new CSharpArgumentInfo[]
					{
						CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.UseCompileTimeType, null),
						CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
					}));
				}
				if (target(<>p__, ScriptHub.<>o__10.<>p__1.Target(ScriptHub.<>o__10.<>p__1, jtoken["Name"].ToString(), arg)))
				{
					if (ScriptHub.<>o__10.<>p__3 == null)
					{
						ScriptHub.<>o__10.<>p__3 = CallSite<Func<CallSite, object, string>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(string), typeof(ScriptHub)));
					}
					arg = ScriptHub.<>o__10.<>p__3.Target(ScriptHub.<>o__10.<>p__3, jtoken["FileName"].ToString());
				}
			}
			if (ScriptHub.<>o__10.<>p__6 == null)
			{
				ScriptHub.<>o__10.<>p__6 = CallSite<Action<CallSite, ScriptHub, object>>.Create(Binder.InvokeMember(CSharpBinderFlags.InvokeSimpleName | CSharpBinderFlags.ResultDiscarded, "SirHurtPipe", null, typeof(ScriptHub), new CSharpArgumentInfo[]
				{
					CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.UseCompileTimeType, null),
					CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
				}));
			}
			Action<CallSite, ScriptHub, object> target2 = ScriptHub.<>o__10.<>p__6.Target;
			CallSite <>p__2 = ScriptHub.<>o__10.<>p__6;
			if (ScriptHub.<>o__10.<>p__5 == null)
			{
				ScriptHub.<>o__10.<>p__5 = CallSite<Func<CallSite, object, string, object>>.Create(Binder.BinaryOperation(CSharpBinderFlags.None, ExpressionType.Add, typeof(ScriptHub), new CSharpArgumentInfo[]
				{
					CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null),
					CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.UseCompileTimeType | CSharpArgumentInfoFlags.Constant, null)
				}));
			}
			Func<CallSite, object, string, object> target3 = ScriptHub.<>o__10.<>p__5.Target;
			CallSite <>p__3 = ScriptHub.<>o__10.<>p__5;
			if (ScriptHub.<>o__10.<>p__4 == null)
			{
				ScriptHub.<>o__10.<>p__4 = CallSite<Func<CallSite, object, object, object>>.Create(Binder.BinaryOperation(CSharpBinderFlags.None, ExpressionType.Add, typeof(ScriptHub), new CSharpArgumentInfo[]
				{
					CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null),
					CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
				}));
			}
			target2(<>p__2, this, target3(<>p__3, ScriptHub.<>o__10.<>p__4.Target(ScriptHub.<>o__10.<>p__4, "loadstring(HttpGet('https://asshurthosting.pw/upl/UIScriptHub/Scripts/script.php?script=", arg), "'))()"));
		}

		// Token: 0x06000050 RID: 80 RVA: 0x0000C838 File Offset: 0x0000C838
		private void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
		{
			if (ScriptHub.<>o__11.<>p__0 == null)
			{
				ScriptHub.<>o__11.<>p__0 = CallSite<Func<CallSite, object, string>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(string), typeof(ScriptHub)));
			}
			string arg = ScriptHub.<>o__11.<>p__0.Target(ScriptHub.<>o__11.<>p__0, this.listBox1.SelectedItem.ToString());
			foreach (JToken jtoken in this.LoadedScripts)
			{
				if (ScriptHub.<>o__11.<>p__2 == null)
				{
					ScriptHub.<>o__11.<>p__2 = CallSite<Func<CallSite, object, bool>>.Create(Binder.UnaryOperation(CSharpBinderFlags.None, ExpressionType.IsTrue, typeof(ScriptHub), new CSharpArgumentInfo[]
					{
						CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
					}));
				}
				Func<CallSite, object, bool> target = ScriptHub.<>o__11.<>p__2.Target;
				CallSite <>p__ = ScriptHub.<>o__11.<>p__2;
				if (ScriptHub.<>o__11.<>p__1 == null)
				{
					ScriptHub.<>o__11.<>p__1 = CallSite<Func<CallSite, string, object, object>>.Create(Binder.BinaryOperation(CSharpBinderFlags.None, ExpressionType.Equal, typeof(ScriptHub), new CSharpArgumentInfo[]
					{
						CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.UseCompileTimeType, null),
						CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
					}));
				}
				if (target(<>p__, ScriptHub.<>o__11.<>p__1.Target(ScriptHub.<>o__11.<>p__1, jtoken["Name"].ToString(), arg)))
				{
					Control control = this.richTextBox1;
					if (ScriptHub.<>o__11.<>p__3 == null)
					{
						ScriptHub.<>o__11.<>p__3 = CallSite<Func<CallSite, object, string>>.Create(Binder.Convert(CSharpBinderFlags.None, typeof(string), typeof(ScriptHub)));
					}
					control.Text = ScriptHub.<>o__11.<>p__3.Target(ScriptHub.<>o__11.<>p__3, jtoken["Desc"].ToString());
					this.pictureBox1.LoadAsync(jtoken["Picture"].ToString());
				}
			}
		}

		// Token: 0x0400017F RID: 383
		public List<JToken> LoadedScripts;
	}
}
